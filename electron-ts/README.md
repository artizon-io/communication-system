# Notes

## Electron

[Awesome Electron](https://github.com/sindresorhus/awesome-electron#boilerplates)

**[Process Model](https://www.electronjs.org/docs/latest/tutorial/process-model)**
- Electron inherits its multi-process architecture from Chromium

**[Packaging](https://www.electronjs.org/docs/latest/tutorial/application-distribution)**

**Key points**
- Each window wraps a chromium, so try to limit no. windows
- Annoyingly ElectronJS only supports CommonJS, so has to transpile beforehand
- Unclear on how to write a HMR plugin for Electron Forge, and they only provide a webpack one. Or I can go through [their webpack plugin source](https://github.com/electron-userland/electron-forge/tree/main/packages/plugin/webpack/src)
- Shoud not use `nodeIntegration: true` and `contextIsolation: false`, should instead use `contextBridge` and preload script
- Important to set TS `allowSyntheticImport` and `esModuleInterop` when working with `CommonJS`
- Packages are generally moving away from CommonJS (to ESM), importing ESM from CommonJS requires dynamic import (as `require` is synchronous), but we cannot control which import method the subdependencies uses... (Can possibly use yarn resolution to pin down subdependencies versions but some of them doesn't support CommonJS at all)
- Technically Node supports ESM, but [Electron doesn't...](https://github.com/electron/electron/issues/21457). Must use workaround like `esm` and `fix-esm`
- [ESM is actually terrible](https://gist.github.com/joepie91/bca2fda868c1e8b2c2caf76af7dfcad3)

## Electron Forge
Honorable mention... [Electron build](https://www.electron.build/)

**[Configuration](https://www.electronforge.io/configuration)**

- Inside `package.json` or `forge.config.js`

**[Makers](https://www.electronforge.io/config/makers)**

- Generate platform specific distributables for Electron apps using Electron Forge
- Configured inside `package.json` or `forge.config.js` under `config.forge.makers`

**Hooks**
- Own logic at different points in the Electron Forge build proces

**Publishers**
- Taking the artifacts generated by the make command and sending them somewhere (like a github repo)

**Packaging**
- Since it is a node env, no need for bundling, just make sure commonJS is used

**Key points**
- Uses [Electron Rebuild](https://github.com/electron/electron-rebuild), which builds native node modules (mimic node env) using the copy of node which electron uses